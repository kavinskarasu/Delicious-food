<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/index.css" />
    <style>
      /* -- quantity box -- */

.quantity {
 display: inline-block; }

.quantity .input-text.qty {
 width: 35px;
 height: 39px;
 padding: 0 5px;
 text-align: center;
 background-color: transparent;
 border: 1px solid #efefef;
}

.quantity.buttons_added {
 text-align: left;
 position: relative;
 white-space: nowrap;
 vertical-align: top; }

.quantity.buttons_added input {
 display: inline-block;
 margin: 0;
 vertical-align: top;
 box-shadow: none;
}

.quantity.buttons_added .minus,
.quantity.buttons_added .plus {
 padding: 7px 10px 8px;
 height: 41px;
 background-color: #ffffff;
 border: 1px solid #efefef;
 cursor:pointer;}

.quantity.buttons_added .minus {
 border-right: 0; }

.quantity.buttons_added .plus {
 border-left: 0; }

.quantity.buttons_added .minus:hover,
.quantity.buttons_added .plus:hover {
 background: #eeeeee; }

.quantity input::-webkit-outer-spin-button,
.quantity input::-webkit-inner-spin-button {
 -webkit-appearance: none;
 -moz-appearance: none;
 margin: 0; }
 
 .quantity.buttons_added .minus:focus,
.quantity.buttons_added .plus:focus {
 outline: none; }


    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script
    defer
    src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js"
  ></script>
  </head>
  <body>
   
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <!-- Container wrapper -->
      <div class="container-fluid">
        <!-- Navbar brand -->
      
        
       <% if(user){ %><a class="navbar-brand" href="#">Welcome  <%= user %></a><% }%>
        <!-- Toggle button -->
        <button
          class="navbar-toggler"
          type="button"
          data-mdb-toggle="collapse"
          data-mdb-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <i class="fas fa-bars text-light"></i>
        </button>

        <!-- Collapsible wrapper -->
        <!-- <div class="collapse navbar-collapse" id="navbarSupportedContent">
           Left links -->
        
          <!-- Left links -->

          <!-- Right links -->
          <% if(user){ %>
            
            <ul class="navbar-nav ms-auto d-flex flex-row mt-3 mt-lg-0">
              <li class="nav-item text-center mx-2 mx-lg-1">
               
                <a class="nav-link" href="">
                  
                  <svg  onclick=Cart() xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill cart" viewBox="0 0 16 16">
                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                  </svg>
                 
                </a>
              </li>
              <li class="nav-item text-center mx-2 mx-lg-1">
                <a class="nav-link" href="#!">
                  <div></div>
                  <button>logout</button>
                </a>
              </li>
            </ul>
          <% } else{ %>  
          
            <ul class="navbar-nav ms-auto d-flex flex-row mt-3 mt-lg-0">
              <li class="nav-item text-center mx-2 mx-lg-1">
               
                <a class="nav-link" href="#!">
                  
                 <a href="/api/v1/views/signup"><button>Signup</button></a> 
                </a>
              </li>
              <li class="nav-item text-center mx-2 mx-lg-1">
                <a class="nav-link" href="#!">
                  <div></div>
                  <a href="/api/v1/views/userlogin"><button>Login</button></a> 
                  
                </a>
              </li>
            </ul>
         <% } %>
         
          <!-- Right links -->

          <!-- Search form -->
          <form class="d-flex input-group w-auto ms-lg-3 my-3 my-lg-0">
            <a href="/api/v1/views/viewCart">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"
              />
            </svg>
          </a>
          </form>
        </div>
        <!-- Collapsible wrapper -->
      </div>
      <!-- Container wrapper -->
    </nav>
    <!-- Navbar -->
       
    <div class="row row-cols-1 row-cols-md-3 g-4">
      <% for (var i =0; i < prodects.length; i++ ) { %>
      <div class="col">
        <div class="card h-100">
          <img src="<%= prodects[i].image%>" class="card-img-top" alt="...">
          <div class="card-body">
            <h5 class="card-title"><%= prodects[i].name %></h5>
            <p class="card-text"><%= prodects[i].description %></p>
            <button type="button" class="btn btn-primary">
              â‚¹ <%= prodects[i].price %>
            </button>
                  
              <!-- <a href= "/api/v1/users/cart/">Add to cart</a> -->
              <button class="btn btn-block btn-primary" onclick="AddToCart('<%=prodects[i]._id%>')">Add to cart</button>
              <div class="quantity buttons_added">
                <input type="button" value="-"  onclick="minus('<%=prodects[i]._id%>')"class="minus "><input type="number"  id="i<%=prodects[i]._id%>" step="1" min="1" max="" name="quantity" value="0" title="Qty" class="input-text qty text" size="4" pattern="" inputmode=""><input  onclick="plus('<%=prodects[i]._id%>')" type="button" value="+" class="plus">
              </div>
          </div>
        </div>
      </div>
      <% } %>
    </div>
    
      

     
    
    <script>



function plus(id){
 
     
        if(parseInt(document.querySelector(`#i${id}`).value)<=10){
        document.querySelector(`#i${id}`).value=parseInt(document.querySelector(`#i${id}`).value)+1;}
        axios.patch(`/api/v1/users/cartQuanity/${id}/${parseInt(document.querySelector(`#i${id}`).value)}`, 
   
   )
   .then(function (response) {
     console.log();
   })
   .catch(function (error) {
     console.log(error);
   });
       
     }


function minus(id){

        if(parseInt(document.querySelector(`#i${id}`).value)>1){
        document.querySelector(`#i${id}`).value=parseInt(document.querySelector(`#i${id}`).value)-1;}
        axios.patch(`/api/v1/users/cartQuanity/${id}/${parseInt(document.querySelector(`#i${id}`).value)}`, 
   
   )
   .then(function (response) {
     console.log();
   })
   .catch(function (error) {
     console.log(error);
   });
     }
     

    


       function AddToCart(id){

           
        if(parseInt(document.querySelector(`#i${id}`).value)==0){
document.querySelector(`#i${id}`).value=parseInt(document.querySelector(`#i${id}`).value)+1;}
axios.patch(`/api/v1/users/cart/${id}/${parseInt(document.querySelector(`#i${id}`).value)}`, 
   
   )

        



      
       }

    </script>
    <!-- <script src="/js/bundle.js"></script> -->
  </body>
</html>
